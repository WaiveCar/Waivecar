<ion-view can-swipe-back="false" hide-back-button="true" class="sign-in-content">

  <ion-nav-title class="sign-in-header">
    <ul class="progress-bar">
      <li class="active"></li>
      <li></li>
      <li></li>
      <li></li>
    </ul>
    <page-title class="dark-bg">Register</page-title>
  </ion-nav-title>

  <ion-content scroll="true" padding="true" class="ion-content--center dark-bg">

    <div>
      <button type="button" class="button button-block button-positive button-padded button-fb" ng-click="userCreateCtrl.registerWithFacebook()">
        <div class="logo-fb"><i class="fa fa-facebook"></i></div>
        <div class="text-fb">Register with Facebook</div>
        <div class="clearfix"></div>
      </button>
      <lined>Or</lined>
    </div>

    <form name="form" id="form" ng-submit="userCreateCtrl.submit(form)" class="newUser" novalidate>
      <div class="list">

        <label class="item item-input">
          <span class="input-label">Full Name</span>
          <input type="text" name="fullName" ng-model="userCreateCtrl.user.fullName" required autofocus placeholder="John Doe" />
        </label>

        <label class="item item-input">
          <span class="input-label">Email</span>
          <input type="email" name="email" ng-model="userCreateCtrl.user.email" required placeholder="name@example.com" />
        </label>

        <label class="item item-input">
          <span class="input-label mobile-label">Mobile</span>
          <i class="icon icon-flag" ng-include="'/img/flag-icon.svg'"></i>
          <input type="text" name="phone" ng-model="userCreateCtrl.user.phone" required />
        </label>

        <label class="item item-input">
          <span class="input-label">Password</span>
          <input type="password" name="password" ng-model="userCreateCtrl.user.password" required placeholder="6 characters or more" ng-minlength="6">
        </label>

        <ion-checkbox ng-model="userCreateCtrl.havePromo" ng-change="userCreateCtrl.inLocationChanged('promo')">I have a promo code</ion-checkbox>
        <label class="item item-input" ng-if="userCreateCtrl.havePromo">
          <input type="text" name="promoCode" ng-model="userCreateCtrl.user.promoCode" ng-if="userCreateCtrl.havePromo" required placeholder="Promo Code" >
          <input type="text" name="account" ng-model="userCreateCtrl.user.account" ng-if="userCreateCtrl.havePromo" required placeholder="Unit/Account Number" >
        </label>

        <ion-checkbox ng-model="userCreateCtrl.inLA" ng-change="userCreateCtrl.inLocationChanged('la')">I'm in Los Angeles</ion-checkbox>
        <ion-checkbox ng-model="userCreateCtrl.inNotLA" ng-change="userCreateCtrl.inLocationChanged('notla')">I'm somewhere else</ion-checkbox>

        <input type="hidden" name="isLocationSelected" ng-model="userCreateCtrl.isLocationSelected" required placeholder="City" >

        <label class="item item-input" ng-if="userCreateCtrl.inNotLA">
          <span class="input-label">Where are you?</span>
          <input type="text" name="placeName" ng-model="userCreateCtrl.placeName" required placeholder="Your Town, Your State" >
        </label>


        <div class="errors">
          <div ng-messages="form.fullName.$error" ng-if="form.$submitted">
            <div ng-message="required">Full Name is required</div>
          </div>
          <div ng-messages="form.email.$error" ng-if="form.$submitted">
            <div ng-message="required">An Email Address is required</div>
            <div ng-message="email">A valid Email Address is required</div>
          </div>
          <div ng-messages="form.phone.$error" ng-if="form.$submitted">
            <div ng-message="required">A Mobile Phone Number is required</div>
          </div>
          <div ng-messages="form.password.$error" ng-if="form.$submitted">
            <div ng-message="required">Password is required</div>
            <div ng-message="minlength">Password must be greater than 5 characters</div>
          </div>

          <div ng-messages="form.placeName.$error" ng-if="form.$submitted && userCreateCtrl.inNotLA">
            <div ng-message="required">A Your Town, Your State is required</div>
          </div>

          <div  ng-messages="form.isLocationSelected.$error" ng-if="form.$submitted">
            <div  ng-message="required">Please tell us where you're living</div>
          </div>

        </div>

      </div>
    </form>
    <p class="text-agreeing padding">By tapping on continue, you are agreeing with our <a href="https://waive.car/terms.html">Terms of Service.</a><br/><br/>You won't receive any spam from us.</p>

  </ion-content>

  <ion-footer-bar class="no-padding">
    <div class="button-bar">
      <button type="button" class="button button-gray" go-back>Cancel</button>
      <button type="submit" form="form" class="button button-balanced">Continue</button>
    </div>
  </ion-footer-bar>

</ion-view>
