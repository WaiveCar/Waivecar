<ion-view ng-controller="UserEditController">
  <ion-nav-title>
    <page-title class="dark-bg title-plain">Account</page-title>
  </ion-nav-title>
  <ion-nav-buttons side="right">
    <button menu-toggle="right" class="button button-icon icon ion-navicon"></button>
  </ion-nav-buttons>
  <ion-content padding="true" class="ion-content--center gray-bg">
    <form ng-submit="save(form)" name="form" id="form" novalidate>
      <div ng-include="'/templates/users/_form.html'"></div>
    </form>
    <div class="padding-top padding-bottom">
      <button class="button button-balanced button-block" ui-sref="auth-account-verify" ng-if="!user.verifiedPhone">Enter Phone Verification Code</button>
      <button class="button button-balanced button-block" ui-sref="credit-cards">Update Payment Method</button>
      <button class="button button-positive button-block" ui-sref="licenses-new" ng-if="!license">Add Driver's License</button>
      <button class="button button-positive button-block" ui-sref="licenses-edit({ licenseId: license.id })" ng-if="license.status === 'provided' || license.status === 'pending'">Validate Driver's License</button>
      <div class="text-center" ng-if="license">
        <p ng-if="license.status === 'provided'">Your Driver's License is pending validation.</p>
        <p ng-if="license.status === 'in-progress'">Your Driver's License is ongoing validation.</p>
        <p ng-if="license.status === 'complete' && license.outcome === 'reject'">Driver's License has failed validation.</p>
        <p ng-if="license.status === 'complete' && license.outcome === 'consider'">Driver's License is being manually validated.</p>
        <p ng-if="license.status === 'complete' && license.outcome === 'clear'">Your Driver's License is cleared.</p>
      </div>
      <div class="identity-verification text-center" ng-if="license">
        <button class="button button-positive button-block" ui-sref="verify-id" ng-if="user.status !== 'active'">Verify Identity</button>
        <p ng-if="user.status !== 'active'">Your identity has not yet been verified.</p>
        <p ng-if="user.status === 'active'">Your identity is verified.</p>
      </div>
    </div>
    <p ng-if="license.status ==='complete' && license.outcome !== 'clear'" class="padding-top content-disclaimer">Please contact us if you would like more information in relation to the status of your Driver's License.</p>
  </ion-content>
  <ion-footer-bar class="no-padding">
    <div class="button-bar">
      <button type="submit" form="form" class="button button-balanced">Update</button>
    </div>
  </ion-footer-bar>
</ion-view>
