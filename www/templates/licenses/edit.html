<ion-view>
  <ion-nav-title>
    <page-title class="dark-bg">Driver's License</page-title>
  </ion-nav-title>

  <ion-content padding="true" class="ion-content--center dark-bg">
    <form ng-submit="licenseCtrl.update(form)" name="form" id="form" novalidate>
      <div class="list list-inset">
        <label class="item item-input" ng-if="licenseCtrl.license && licenseCtrl.license.status !== 'pending'">
          <span ng-if="licenseCtrl.license.status === 'provided'" class="input-label">Your Driver's License is pending validation.</span>
          <span ng-if="licenseCtrl.license.status === 'in-progress'" class="input-label">Your Driver's License is ongoing validation.</span>
          <span ng-if="licenseCtrl.license.status === 'complete' && licenseCtrl.license.outcome === 'reject'" class="input-label">Driver's License has failed validation.</span>
          <span ng-if="licenseCtrl.license.status === 'complete' && licenseCtrl.license.outcome === 'consider'" class="input-label">Driver's License is being manually validated.</span>
          <span ng-if="licenseCtrl.license.status === 'complete' && licenseCtrl.license.outcome === 'clear'" class="input-label">Your Driver's License is cleared.</span>
        </label>
        <label class="item item-input">
          <span class="input-label required">License Number</span>
          <input name="text" type="text" placeholder="Driver's License Number" ng-model="licenseCtrl.license.number" autofocus required ng-disabled="!licenseCtrl.canEdit">
        </label>
        <label class="item item-input item-select">
          <div class="input-label required">License State</div>
          <select ng-model="licenseCtrl.license.state" name="state" required ng-options="state.abbreviation as state.name for state in licenseCtrl.states" ng-disabled="!licenseCtrl.canEdit">
            <option value=""></option>
          </select>
        </label>
        <label class="item item-input">
          <span class="input-label required">First Name</span>
          <input name="firstName" type="text" placeholder="First Name" ng-model="licenseCtrl.license.firstName" required ng-disabled="!licenseCtrl.canEdit">
        </label>
        <label class="item item-input">
          <span class="input-label">Middle Name</span>
          <input name="middleName" type="text" placeholder="Middle Name" ng-model="licenseCtrl.license.middleName" ng-disabled="!licenseCtrl.canEdit">
        </label>
        <label class="item item-input">
          <span class="input-label required">Last Name</span>
          <input name="lastName" type="text" placeholder="Last Name" ng-model="licenseCtrl.license.lastName" required ng-disabled="!licenseCtrl.canEdit">
        </label>
        <label class="item item-input item-select">
          <div class="input-label">Gender</div>
          <select name="gender" ng-model="licenseCtrl.license.gender" ng-disabled="!licenseCtrl.canEdit">
            <option value="male">Male</option>
            <option value="female">Female</option>
            <option value="other">Other</option>
          </select>
        </label>
        <label class="item item-input">
          <span class="input-label required">Date Of Birth</span>
          <input name="birthDate" type="date" value="" placeholder="Date of Birth" ng-model="licenseCtrl.license.birthDate" required ng-if="licenseCtrl.canEdit">
          <span class="input-label" ng-if="licenseCtrl.birthDateMoment">{{::licenseCtrl.birthDateMoment}}</span>
        </label>
      </div>
      <div class="validations" ng-if="form.$submitted && form.$invalid">
        <div class="help-block" ng-if="form.number.$error.required">Licence Number is required</div>
        <div class="help-block" ng-if="form.state.$error.required">Licence State is required</div>
        <div class="help-block" ng-if="form.firstName.$error.required">First Name is required</div>
        <div class="help-block" ng-if="form.lastName.$error.required">Last Name is required</div>
        <div class="help-block" ng-if="form.birthDate.$error.required">Date of Birth is required</div>
      </div>
      <div class="padding-top padding-bottom">
        <button type="submit" class="button button-balanced button-block" ng-if="licenseCtrl.canEdit">Update Details</button>
        <button type="button" class="button button-balanced button-block" ng-if="licenseCtrl.license.status === 'provided'" ng-click="licenseCtrl.validate(form)">Validate</button>
      </div>
    </form>
  </ion-content>
</ion-view>
